{
    "_properties": { "isServerWorkflow": false },
    "components": [
        {
            "id": 2,
            "steps": [
                {
                    "id": 3,
                    "inputs": {},
                    "position": "-150,-110",
                    "purpose": "start",
                    "title": "Start",
                    "transitions": [
                        {
                            "id": 797,
                            "inputs": {},
                            "position": "-60,-50 -60,0",
                            "sourceConnector": "bottom",
                            "target": { "id": 732 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Subworkflow",
                    "id": 395,
                    "inputs": {
                        "subworkflow": {
                            "accessors": ["$$subworkflow"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$subworkflow",
                            "source": "$$subworkflow"
                        }
                    },
                    "name": "setState",
                    "position": "740,180",
                    "title": "Set State"
                },
                {
                    "action": "gcx:wf:core:subworkflow:RunSubworkflow",
                    "id": 463,
                    "inputs": {
                        "subworkflowId": {
                            "accessors": ["activities"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "activities.setState",
                            "source": "activities.setState"
                        }
                    },
                    "name": "runSetState1",
                    "position": "-30,770",
                    "title": "Run Subworkflow",
                    "transitions": [
                        {
                            "id": 467,
                            "inputs": {},
                            "position": "90,840 90,910",
                            "target": { "id": 750 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Container",
                    "description": "Initialize variables",
                    "id": 732,
                    "inputs": {},
                    "position": "-180,0",
                    "title": "Setup",
                    "transitions": [
                        {
                            "id": 784,
                            "inputs": {},
                            "position": "-60,120 -60,180",
                            "target": { "id": 736 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Subworkflow",
                    "id": 734,
                    "inputs": {
                        "subworkflow": {
                            "accessors": ["$$subworkflow"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$subworkflow",
                            "source": "$$subworkflow"
                        }
                    },
                    "name": "getCode",
                    "position": "740,0",
                    "title": "Get Code"
                },
                {
                    "action": "gcx:wf:core::Container",
                    "description": "Get the target layer",
                    "id": 736,
                    "inputs": {},
                    "position": "-180,180",
                    "title": "Find Layer",
                    "transitions": [
                        {
                            "id": 786,
                            "inputs": {},
                            "position": "-60,300 -60,390",
                            "sourceConnector": "bottom",
                            "target": { "id": 738 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:forms:form:DisplayForm",
                    "id": 738,
                    "inputs": {
                        "form": {
                            "accessors": [],
                            "code": "resources.forms[values.id]",
                            "values": { "id": 730 }
                        },
                        "reset": true
                    },
                    "name": "queryForm",
                    "position": "-180,390",
                    "title": "Display Form",
                    "transitions": [
                        {
                            "id": 788,
                            "inputs": {},
                            "position": "-60,510 -60,570",
                            "sourceConnector": "bottom",
                            "target": { "id": 742 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Subworkflow",
                    "id": 740,
                    "inputs": {
                        "subworkflow": {
                            "accessors": ["$$subworkflow"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$subworkflow",
                            "source": "$$subworkflow"
                        }
                    },
                    "name": "generateQueryFields",
                    "position": "160,390",
                    "title": "Query Fields"
                },
                {
                    "action": "gcx:wf:core::If",
                    "id": 742,
                    "inputs": {
                        "condition": {
                            "accessors": ["$queryForm"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "$queryForm.result == \"submit\"",
                            "source": "$queryForm.result == \"submit\""
                        }
                    },
                    "position": "-120,570",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "false",
                            "id": 790,
                            "inputs": {},
                            "position": "0,600 90,600 90,650",
                            "sourceConnector": "right",
                            "target": { "id": 744 },
                            "targetConnector": "top"
                        },
                        {
                            "branch": "true",
                            "id": 792,
                            "inputs": {},
                            "position": "-120,600 -260,600 -260,730",
                            "sourceConnector": "left",
                            "target": { "id": 746 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::SetWorkflowOutput",
                    "id": 744,
                    "inputs": {
                        "name": "action",
                        "value": {
                            "accessors": ["$queryForm"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "$queryForm.result",
                            "source": "$queryForm.result"
                        }
                    },
                    "position": "-30,650",
                    "title": "Set Workflow Output",
                    "transitions": [
                        {
                            "id": 465,
                            "inputs": {},
                            "position": "90,680 90,770",
                            "target": { "id": 463 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Container",
                    "id": 746,
                    "inputs": {},
                    "position": "-380,730",
                    "title": "Run Query",
                    "transitions": [
                        {
                            "id": 796,
                            "inputs": {},
                            "position": "-380,775 -400,775 -400,450 -180,450",
                            "sourceConnector": "left",
                            "target": { "id": 738 },
                            "targetConnector": "left"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Subworkflow",
                    "id": 748,
                    "inputs": {
                        "subworkflow": {
                            "accessors": ["$$subworkflow"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$subworkflow",
                            "source": "$$subworkflow"
                        }
                    },
                    "name": "changedEvent",
                    "position": "450,390",
                    "title": "Changed"
                },
                {
                    "action": "gcx:wf:core::Exit",
                    "id": 750,
                    "inputs": {},
                    "position": "0,910",
                    "title": "Exit"
                },
                {
                    "action": "gcx:wf:core::Subworkflow",
                    "id": 752,
                    "inputs": {
                        "subworkflow": {
                            "accessors": ["$$subworkflow"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$subworkflow",
                            "source": "$$subworkflow"
                        }
                    },
                    "name": "clickedEvent",
                    "position": "150,180",
                    "title": "Clicked"
                },
                {
                    "action": "gcx:wf:core::Subworkflow",
                    "id": 754,
                    "inputs": {
                        "subworkflow": {
                            "accessors": ["$$subworkflow"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$subworkflow",
                            "source": "$$subworkflow"
                        }
                    },
                    "name": "validateEvent",
                    "position": "450,180",
                    "title": "Validate"
                },
                {
                    "action": "gcx:wf:core::Subworkflow",
                    "id": 756,
                    "inputs": {
                        "subworkflow": {
                            "accessors": ["$$subworkflow"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$subworkflow",
                            "source": "$$subworkflow"
                        }
                    },
                    "name": "populateEvent",
                    "position": "150,0",
                    "title": "Populate"
                },
                {
                    "action": "gcx:wf:core::Subworkflow",
                    "id": 758,
                    "inputs": {
                        "subworkflow": {
                            "accessors": ["$$subworkflow"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$subworkflow",
                            "source": "$$subworkflow"
                        }
                    },
                    "name": "suggestEvent",
                    "position": "450,0",
                    "title": "Suggest"
                }
            ]
        },
        {
            "id": 288,
            "steps": [
                {
                    "action": "gcx:wf:core:subworkflow:RunSubworkflow",
                    "id": 290,
                    "inputs": {
                        "arguments": {
                            "accessors": ["$suggestSearchField"],
                            "annotations": [
                                { "count": 19, "index": 8, "kind": "idref" }
                            ],
                            "code": "{ field: $suggestSearchField.result.field }",
                            "source": "{field: $suggestSearchField.result.field}"
                        },
                        "subworkflowId": {
                            "accessors": ["activities"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "activities.generateQueryFields",
                            "source": "activities.generateQueryFields"
                        }
                    },
                    "name": "suggestFields",
                    "position": "-40,670",
                    "title": "Run Subworkflow",
                    "transitions": [
                        {
                            "id": 322,
                            "inputs": {},
                            "position": "80,740 80,790",
                            "target": { "id": 292 }
                        }
                    ]
                },
                {
                    "action": "uuid:fc5de4bd-b399-4353-82ea-cbf393a350b3::GetLayerCodedValues",
                    "id": 292,
                    "inputs": {
                        "field": {
                            "accessors": ["$suggestSearchField"],
                            "annotations": [
                                { "count": 19, "index": 0, "kind": "idref" }
                            ],
                            "code": "$suggestSearchField.result.field",
                            "source": "$suggestSearchField.result.field"
                        },
                        "layer": {
                            "accessors": ["$layer"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$layer.result",
                            "source": "$layer.result"
                        }
                    },
                    "name": "suggestCodedValues",
                    "position": "-40,790",
                    "title": "Get Layer Coded Values",
                    "transitions": [
                        {
                            "id": 324,
                            "inputs": {},
                            "position": "80,860 80,1100",
                            "sourceConnector": "bottom",
                            "target": { "id": 294 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::If",
                    "id": 294,
                    "inputs": {
                        "condition": {
                            "accessors": [
                                "$suggestCodedValues",
                                "$suggestCodedValues"
                            ],
                            "annotations": [
                                { "count": 19, "index": 2, "kind": "idref" },
                                { "count": 19, "index": 31, "kind": "idref" }
                            ],
                            "code": "!!$suggestCodedValues.result && $suggestCodedValues.result.length > 0",
                            "source": "!!$suggestCodedValues.result &&$suggestCodedValues.result.length > 0"
                        }
                    },
                    "position": "20,1100",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "true",
                            "id": 326,
                            "inputs": {},
                            "position": "20,1130 -100,1130 -100,1230",
                            "sourceConnector": "left",
                            "target": { "id": 296 },
                            "targetConnector": "top"
                        },
                        {
                            "branch": "false",
                            "id": 328,
                            "inputs": {},
                            "position": "140,1130 240,1130 240,1520",
                            "sourceConnector": "right",
                            "target": { "id": 298 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::CreateValue",
                    "id": 296,
                    "inputs": {
                        "expression": {
                            "accessors": [
                                "$suggestCodedValues",
                                "$textReplace1"
                            ],
                            "annotations": [
                                { "count": 19, "index": 15, "kind": "idref" },
                                { "count": 13, "index": 97, "kind": "idref" }
                            ],
                            "code": "(function () {\n    return $suggestCodedValues.result.filter(function (x) {\n        return x.name.toUpperCase().includes($textReplace1.result.toUpperCase());\n    });\n})()",
                            "source": "(()=> {\nreturn $suggestCodedValues.result.filter((x)=> { \n  return x.name.toUpperCase().includes($textReplace1.result.toUpperCase()\n)})\n\n })()"
                        }
                    },
                    "name": "filteredSuggestCodes",
                    "position": "-220,1230",
                    "title": "Create Value",
                    "transitions": [
                        {
                            "id": 330,
                            "inputs": {},
                            "position": "-100,1300 -100,1380",
                            "target": { "id": 300 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Evaluate",
                    "id": 298,
                    "inputs": {
                        "expression": {
                            "accessors": [
                                "$suggestWhereClause",
                                "$suggestWhereClause",
                                "$suggestWhereClause",
                                "$suggestWhereClause",
                                "$suggestSearchField",
                                "$textReplace1",
                                "$suggestSearchField",
                                "$textReplace1"
                            ],
                            "annotations": [
                                { "count": 19, "index": 0, "kind": "idref" },
                                { "count": 19, "index": 31, "kind": "idref" },
                                { "count": 19, "index": 61, "kind": "idref" },
                                { "count": 19, "index": 104, "kind": "idref" },
                                { "count": 19, "index": 144, "kind": "idref" },
                                { "count": 13, "index": 193, "kind": "idref" },
                                { "count": 19, "index": 230, "kind": "idref" },
                                { "count": 13, "index": 279, "kind": "idref" }
                            ],
                            "code": "$suggestWhereClause.result = !!$suggestWhereClause.result && $suggestWhereClause.result.length > 0 ? \"\".concat($suggestWhereClause.result, \" AND UPPER(\").concat($suggestSearchField.result.field, \") LIKE UPPER('\").concat($textReplace1.result, \"%')\") : \"UPPER(\".concat($suggestSearchField.result.field, \") LIKE UPPER('\").concat($textReplace1.result, \"%')\")",
                            "source": "$suggestWhereClause.result = !!$suggestWhereClause.result && $suggestWhereClause.result.length > 0 ? `${$suggestWhereClause.result} AND UPPER(${$suggestSearchField.result.field}) LIKE UPPER('${$textReplace1.result}%')` : `UPPER(${$suggestSearchField.result.field}) LIKE UPPER('${$textReplace1.result}%')`"
                        }
                    },
                    "name": "updatedSuggestWhereClause",
                    "position": "120,1520",
                    "title": "Evaluate Expression",
                    "transitions": [
                        {
                            "id": 332,
                            "inputs": {},
                            "position": "240,1590 240,1650",
                            "sourceConnector": "bottom",
                            "target": { "id": 302 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::If",
                    "id": 300,
                    "inputs": {
                        "condition": {
                            "accessors": ["$filteredSuggestCodes"],
                            "annotations": [
                                { "count": 21, "index": 0, "kind": "idref" }
                            ],
                            "code": "$filteredSuggestCodes.result.length > 0",
                            "source": "$filteredSuggestCodes.result.length > 0"
                        }
                    },
                    "position": "-160,1380",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "true",
                            "id": 338,
                            "inputs": {},
                            "position": "-160,1410 -250,1410 -250,1520",
                            "sourceConnector": "left",
                            "target": { "id": 308 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:arcgis:query:QueryTask",
                    "description": "Query for features.",
                    "id": 302,
                    "inputs": {
                        "outFields": {
                            "accessors": ["$suggestSearchField"],
                            "annotations": [
                                { "count": 19, "index": 0, "kind": "idref" }
                            ],
                            "code": "$suggestSearchField.result.field",
                            "source": "$suggestSearchField.result.field"
                        },
                        "returnDistinctValues": true,
                        "returnGeometry": false,
                        "url": {
                            "accessors": ["$layerUrl"],
                            "annotations": [
                                { "count": 9, "index": 0, "kind": "idref" }
                            ],
                            "code": "$layerUrl.result",
                            "source": "$layerUrl.result"
                        },
                        "where": {
                            "accessors": ["$suggestWhereClause"],
                            "annotations": [
                                { "count": 19, "index": 0, "kind": "idref" }
                            ],
                            "code": "$suggestWhereClause.result",
                            "source": "$suggestWhereClause.result"
                        }
                    },
                    "name": "suggestFeatureQuery",
                    "position": "120,1650",
                    "title": "Query Layer",
                    "transitions": [
                        {
                            "id": 340,
                            "inputs": {},
                            "position": "240,1750 240,1790",
                            "target": { "id": 310 }
                        }
                    ]
                },
                {
                    "action": "uuid:fc5de4bd-b399-4353-82ea-cbf393a350b3::GenerateWhereClause",
                    "id": 304,
                    "inputs": {
                        "layer": {
                            "accessors": ["$layer"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$layer.result",
                            "source": "$layer.result"
                        },
                        "queryFields": {
                            "accessors": ["$searchFields"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" }
                            ],
                            "code": "$searchFields.result",
                            "source": "$searchFields.result"
                        },
                        "targetForm": {
                            "accessors": ["$queryForm"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "$queryForm",
                            "source": "$queryForm"
                        }
                    },
                    "name": "suggestWhereClause",
                    "position": "-40,360",
                    "title": "Generate Where Clause",
                    "transitions": [
                        {
                            "id": 334,
                            "inputs": {},
                            "position": "80,430 80,490",
                            "sourceConnector": "bottom",
                            "target": { "id": 306 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::TextReplace",
                    "description": "Escape apostrophe characters to avoid SQL injection and broken queries.",
                    "id": 306,
                    "inputs": {
                        "newValue": "''",
                        "oldValue": "'",
                        "text": {
                            "accessors": ["$suggestEventData"],
                            "annotations": [
                                { "count": 17, "index": 0, "kind": "idref" }
                            ],
                            "code": "$suggestEventData.argument",
                            "source": "$suggestEventData.argument"
                        }
                    },
                    "name": "textReplace1",
                    "position": "-40,490",
                    "title": "Text Replace",
                    "transitions": [
                        {
                            "id": 336,
                            "inputs": {},
                            "position": "80,620 80,670",
                            "target": { "id": 290 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:forms::GetFormElementItemsFromCollection",
                    "id": 308,
                    "inputs": {
                        "collection": {
                            "accessors": ["$filteredSuggestCodes"],
                            "annotations": [
                                { "count": 21, "index": 0, "kind": "idref" }
                            ],
                            "code": "$filteredSuggestCodes.result",
                            "source": "$filteredSuggestCodes.result"
                        },
                        "labelFieldName": "name",
                        "valueFieldName": "code"
                    },
                    "name": "suggestCodedFormItems",
                    "position": "-370,1520",
                    "title": "Get Form Element Items From Collection",
                    "transitions": [
                        {
                            "id": 342,
                            "inputs": {},
                            "position": "-250,1590 -250,1670",
                            "target": { "id": 312 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:forms::GetFormElementItemsFromFeatures",
                    "description": "Convert the features into form element items to be used in the element.",
                    "id": 310,
                    "inputs": {
                        "features": {
                            "accessors": ["$suggestFeatureQuery"],
                            "annotations": [
                                { "count": 20, "index": 0, "kind": "idref" }
                            ],
                            "code": "$suggestFeatureQuery.features",
                            "source": "$suggestFeatureQuery.features"
                        },
                        "labelFieldName": {
                            "accessors": ["$suggestSearchField"],
                            "annotations": [
                                { "count": 19, "index": 0, "kind": "idref" }
                            ],
                            "code": "$suggestSearchField.result.field",
                            "source": "$suggestSearchField.result.field"
                        },
                        "valueFieldName": {
                            "accessors": ["$suggestSearchField"],
                            "annotations": [
                                { "count": 19, "index": 0, "kind": "idref" }
                            ],
                            "code": "$suggestSearchField.result.field",
                            "source": "$suggestSearchField.result.field"
                        }
                    },
                    "name": "suggestFeatureFormItems",
                    "position": "120,1790",
                    "title": "Get Form Element Items From Features",
                    "transitions": [
                        {
                            "id": 344,
                            "inputs": {},
                            "position": "240,1920 240,1990",
                            "target": { "id": 314 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:forms::SetFormElementItems",
                    "description": "",
                    "id": 312,
                    "inputs": {
                        "elementName": {
                            "accessors": ["$suggestEventData"],
                            "annotations": [
                                { "count": 17, "index": 0, "kind": "idref" }
                            ],
                            "code": "$suggestEventData.elementId",
                            "source": "$suggestEventData.elementId"
                        },
                        "form": {
                            "accessors": ["$$form"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$form",
                            "source": "$$form"
                        },
                        "items": {
                            "accessors": ["$suggestCodedFormItems"],
                            "annotations": [
                                { "count": 22, "index": 0, "kind": "idref" }
                            ],
                            "code": "$suggestCodedFormItems.items",
                            "source": "$suggestCodedFormItems.items"
                        }
                    },
                    "position": "-370,1670",
                    "title": "Set Form Element Items"
                },
                {
                    "action": "gcx:wf:forms::SetFormElementItems",
                    "description": "",
                    "id": 314,
                    "inputs": {
                        "elementName": {
                            "accessors": ["$suggestEventData"],
                            "annotations": [
                                { "count": 17, "index": 0, "kind": "idref" }
                            ],
                            "code": "$suggestEventData.elementId",
                            "source": "$suggestEventData.elementId"
                        },
                        "form": {
                            "accessors": ["$$form"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$form",
                            "source": "$$form"
                        },
                        "items": {
                            "accessors": ["$suggestFeatureFormItems"],
                            "annotations": [
                                { "count": 24, "index": 0, "kind": "idref" }
                            ],
                            "code": "$suggestFeatureFormItems.items",
                            "source": "$suggestFeatureFormItems.items"
                        }
                    },
                    "position": "120,1990",
                    "title": "Set Form Element Items"
                },
                {
                    "action": "gcx:wf:core::Evaluate",
                    "id": 316,
                    "inputs": {
                        "expression": {
                            "accessors": ["$searchFields", "$suggestEventData"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" },
                                { "count": 17, "index": 41, "kind": "idref" }
                            ],
                            "code": "$searchFields.result.find(function (x) { return x.field === $suggestEventData.elementId; })",
                            "source": "$searchFields.result.find(x=> x.field ===$suggestEventData.elementId)"
                        }
                    },
                    "name": "suggestSearchField",
                    "position": "-40,240",
                    "title": "Evaluate Expression",
                    "transitions": [
                        {
                            "id": 346,
                            "inputs": {},
                            "position": "80,310 80,360",
                            "sourceConnector": "bottom",
                            "target": { "id": 304 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:forms::GetFormEventData",
                    "id": 318,
                    "inputs": {
                        "form": {
                            "accessors": ["$$form"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$form",
                            "source": "$$form"
                        }
                    },
                    "name": "suggestEventData",
                    "position": "-40,120",
                    "title": "Get Form Event Data",
                    "transitions": [
                        {
                            "id": 348,
                            "inputs": {},
                            "position": "80,190 80,240",
                            "target": { "id": 316 }
                        }
                    ]
                },
                {
                    "id": 320,
                    "inputs": {},
                    "position": "-10,0",
                    "purpose": "start",
                    "title": "Subworkflow",
                    "transitions": [
                        {
                            "id": 350,
                            "inputs": {},
                            "position": "80,60 80,120",
                            "target": { "id": 318 }
                        }
                    ]
                }
            ]
        },
        {
            "id": 352,
            "steps": [
                {
                    "action": "gcx:wf:core::Evaluate",
                    "id": 285,
                    "inputs": {
                        "expression": {
                            "accessors": [
                                "$populateQuery",
                                "$populateQuery",
                                "$populateQuery",
                                "$populateSearchField"
                            ],
                            "annotations": [
                                { "count": 14, "index": 0, "kind": "idref" },
                                { "count": 14, "index": 143, "kind": "idref" },
                                { "count": 14, "index": 307, "kind": "idref" },
                                { "count": 20, "index": 332, "kind": "idref" }
                            ],
                            "code": "$populateQuery.features = (function (features, field) {\n    var flags = {}, output = [];\n    for (var i = 0; i < features.length; i++) {\n        if (!flags[$populateQuery.features[i].attributes[field]]) {\n            flags[features[i].attributes[field]] = true;\n            output.push(features[i]);\n        }\n    }\n    return output;\n})($populateQuery.features, $populateSearchField.result.field)",
                            "source": "$populateQuery.features=(function(features, field){\n  \n  var flags = {}, output = [];\n  for( var i=0; i< features.length; i++) {\n    if(!flags[$populateQuery.features[i].attributes[field]]){\n\n      flags[features[i].attributes[field]] = true;\n      output.push(features[i]);\n    }\n  \n  }\n return output;\n})($populateQuery.features, $populateSearchField.result.field)"
                        }
                    },
                    "name": "filterDistinct",
                    "position": "240,1310",
                    "title": "Evaluate Expression",
                    "transitions": [
                        {
                            "id": 287,
                            "inputs": {},
                            "position": "360,1380 360,1470",
                            "target": { "id": 366 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core:subworkflow:RunSubworkflow",
                    "id": 354,
                    "inputs": {
                        "arguments": {
                            "accessors": ["$populateQuery"],
                            "annotations": [
                                { "count": 14, "index": 13, "kind": "idref" }
                            ],
                            "code": "{ attributes: $populateQuery.feature.attributes }",
                            "source": "{attributes: $populateQuery.feature.attributes}"
                        },
                        "subworkflowId": {
                            "accessors": ["activities"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "activities.getCode",
                            "source": "activities.getCode"
                        }
                    },
                    "name": "populateCode",
                    "position": "-20,870",
                    "title": "Run Subworkflow",
                    "transitions": [
                        {
                            "id": 390,
                            "inputs": {},
                            "position": "100,940 100,1010",
                            "sourceConnector": "bottom",
                            "target": { "id": 356 }
                        }
                    ]
                },
                {
                    "action": "uuid:fc5de4bd-b399-4353-82ea-cbf393a350b3::GetLayerCodedValues",
                    "id": 356,
                    "inputs": {
                        "field": {
                            "accessors": ["$populateSearchField"],
                            "annotations": [
                                { "count": 20, "index": 0, "kind": "idref" }
                            ],
                            "code": "$populateSearchField.result.field",
                            "source": "$populateSearchField.result.field"
                        },
                        "layer": {
                            "accessors": ["$layer"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$layer.result",
                            "source": "$layer.result"
                        },
                        "typeCode": {
                            "accessors": ["$populateCode"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" }
                            ],
                            "code": "$populateCode.result",
                            "source": "$populateCode.result"
                        }
                    },
                    "name": "populateCodedValues",
                    "position": "-20,1010",
                    "title": "Get Layer Coded Values",
                    "transitions": [
                        {
                            "id": 398,
                            "inputs": {},
                            "position": "100,1080 100,1170",
                            "sourceConnector": "bottom",
                            "target": { "id": 364 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core:subworkflow:RunSubworkflow",
                    "id": 358,
                    "inputs": {
                        "arguments": {
                            "accessors": ["$populateSearchField"],
                            "annotations": [
                                { "count": 20, "index": 8, "kind": "idref" }
                            ],
                            "code": "{ field: $populateSearchField.result.field }",
                            "source": "{field: $populateSearchField.result.field}"
                        },
                        "subworkflowId": {
                            "accessors": ["activities"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "activities.generateQueryFields",
                            "source": "activities.generateQueryFields"
                        }
                    },
                    "name": "populateFields",
                    "position": "-20,450",
                    "title": "Run Subworkflow",
                    "transitions": [
                        {
                            "id": 392,
                            "inputs": {},
                            "position": "100,520 100,580",
                            "target": { "id": 360 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:arcgis:query:QueryTask",
                    "description": "Query for features.",
                    "id": 360,
                    "inputs": {
                        "outFields": {
                            "accessors": ["$populateFields"],
                            "annotations": [
                                { "count": 15, "index": 0, "kind": "idref" }
                            ],
                            "code": "$populateFields.result.fields",
                            "source": "$populateFields.result.fields"
                        },
                        "returnDistinctValues": true,
                        "returnGeometry": false,
                        "url": {
                            "accessors": ["$layerUrl"],
                            "annotations": [
                                { "count": 9, "index": 0, "kind": "idref" }
                            ],
                            "code": "$layerUrl.result",
                            "source": "$layerUrl.result"
                        },
                        "where": {
                            "accessors": [
                                "$populateWhereClause",
                                "$populateWhereClause",
                                "$populateWhereClause"
                            ],
                            "annotations": [
                                { "count": 20, "index": 2, "kind": "idref" },
                                { "count": 20, "index": 33, "kind": "idref" },
                                { "count": 20, "index": 74, "kind": "idref" }
                            ],
                            "code": "!!$populateWhereClause.result && $populateWhereClause.result.length > 0 ? $populateWhereClause.result : \"1=1\"",
                            "source": "!!$populateWhereClause.result && $populateWhereClause.result.length > 0 ? $populateWhereClause.result: `1=1`"
                        }
                    },
                    "name": "populateQuery",
                    "position": "-20,580",
                    "title": "Query Layer",
                    "transitions": [
                        {
                            "id": 394,
                            "inputs": {},
                            "position": "100,670 100,730",
                            "sourceConnector": "bottom",
                            "target": { "id": 362 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::If",
                    "id": 362,
                    "inputs": {
                        "condition": {
                            "accessors": ["$populateQuery"],
                            "annotations": [
                                { "count": 14, "index": 0, "kind": "idref" }
                            ],
                            "code": "$populateQuery.features.length > 0",
                            "source": "$populateQuery.features.length > 0"
                        }
                    },
                    "position": "40,730",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "true",
                            "id": 396,
                            "inputs": {},
                            "position": "40,760 20,760 20,850 100,850 100,870",
                            "sourceConnector": "left",
                            "target": { "id": 354 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::If",
                    "id": 364,
                    "inputs": {
                        "condition": {
                            "accessors": [
                                "$populateCodedValues",
                                "$populateCodedValues"
                            ],
                            "annotations": [
                                { "count": 20, "index": 2, "kind": "idref" },
                                { "count": 20, "index": 33, "kind": "idref" }
                            ],
                            "code": "!!$populateCodedValues.result && $populateCodedValues.result.length > 0",
                            "source": "!!$populateCodedValues.result && $populateCodedValues.result.length > 0"
                        }
                    },
                    "position": "40,1170",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "false",
                            "id": 286,
                            "inputs": {},
                            "position": "160,1200 360,1200 360,1310",
                            "sourceConnector": "right",
                            "target": { "id": 285 },
                            "targetConnector": "top"
                        },
                        {
                            "branch": "true",
                            "id": 402,
                            "inputs": {},
                            "position": "40,1200 -170,1200 -170,1300",
                            "sourceConnector": "left",
                            "target": { "id": 368 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:arcgis::SortFeatureSet",
                    "id": 366,
                    "inputs": {
                        "features": {
                            "accessors": ["$populateQuery"],
                            "annotations": [
                                { "count": 14, "index": 0, "kind": "idref" }
                            ],
                            "code": "$populateQuery.features",
                            "source": "$populateQuery.features"
                        },
                        "sortAttribute": {
                            "accessors": ["$populateSearchField"],
                            "annotations": [
                                { "count": 20, "index": 0, "kind": "idref" }
                            ],
                            "code": "$populateSearchField.result.field",
                            "source": "$populateSearchField.result.field"
                        }
                    },
                    "name": "sortedPopulateFeatures",
                    "position": "240,1470",
                    "title": "Sort Feature Set",
                    "transitions": [
                        {
                            "id": 404,
                            "inputs": {},
                            "position": "360,1540 360,1590",
                            "sourceConnector": "bottom",
                            "target": { "id": 370 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Evaluate",
                    "id": 368,
                    "inputs": {
                        "expression": {
                            "accessors": ["$populateCodedValues"],
                            "annotations": [
                                { "count": 20, "index": 139, "kind": "idref" }
                            ],
                            "code": "(function () {\n    function compare(a, b) {\n        if (a.name < b.name) {\n            return -1;\n        }\n        if (a.name > b.name) {\n            return 1;\n        }\n        return 0;\n    }\n    $populateCodedValues.result.sort(compare);\n})()",
                            "source": "(()=>{\nfunction compare( a, b ) {\n  if ( a.name < b.name ){\n    return -1;\n  }\n  if ( a.name > b.name  ){\n    return 1;\n  }\n  return 0;\n}\n\n$populateCodedValues.result.sort( compare );\n})()"
                        }
                    },
                    "name": "sortedPopulateCodes",
                    "position": "-290,1300",
                    "title": "Evaluate Expression",
                    "transitions": [
                        {
                            "id": 406,
                            "inputs": {},
                            "position": "-170,1370 -170,1430",
                            "sourceConnector": "bottom",
                            "target": { "id": 372 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:forms::GetFormElementItemsFromFeatures",
                    "description": "Convert the features into form element items to be used in the element.",
                    "id": 370,
                    "inputs": {
                        "features": {
                            "accessors": ["$sortedPopulateFeatures"],
                            "annotations": [
                                { "count": 23, "index": 0, "kind": "idref" }
                            ],
                            "code": "$sortedPopulateFeatures.features",
                            "source": "$sortedPopulateFeatures.features"
                        },
                        "labelFieldName": {
                            "accessors": ["$populateSearchField"],
                            "annotations": [
                                { "count": 20, "index": 0, "kind": "idref" }
                            ],
                            "code": "$populateSearchField.result.field",
                            "source": "$populateSearchField.result.field"
                        },
                        "valueFieldName": {
                            "accessors": ["$populateSearchField"],
                            "annotations": [
                                { "count": 20, "index": 0, "kind": "idref" }
                            ],
                            "code": "$populateSearchField.result.field",
                            "source": "$populateSearchField.result.field"
                        }
                    },
                    "name": "populateFeatureFormItems",
                    "position": "240,1590",
                    "title": "Get Form Element Items From Features",
                    "transitions": [
                        {
                            "id": 410,
                            "inputs": {},
                            "position": "360,1720 360,1760",
                            "target": { "id": 376 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:forms::GetFormElementItemsFromCollection",
                    "id": 372,
                    "inputs": {
                        "collection": {
                            "accessors": ["$populateCodedValues"],
                            "annotations": [
                                { "count": 20, "index": 0, "kind": "idref" }
                            ],
                            "code": "$populateCodedValues.result",
                            "source": "$populateCodedValues.result"
                        },
                        "labelFieldName": "name",
                        "valueFieldName": "code"
                    },
                    "name": "populateCodedFormItems",
                    "position": "-290,1430",
                    "title": "Get Form Element Items From Collection",
                    "transitions": [
                        {
                            "id": 412,
                            "inputs": {},
                            "position": "-170,1500 -170,1570",
                            "target": { "id": 378 }
                        }
                    ]
                },
                {
                    "action": "uuid:fc5de4bd-b399-4353-82ea-cbf393a350b3::GenerateWhereClause",
                    "id": 374,
                    "inputs": {
                        "layer": {
                            "accessors": ["$layer"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$layer.result",
                            "source": "$layer.result"
                        },
                        "queryFields": {
                            "accessors": ["$searchFields"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" }
                            ],
                            "code": "$searchFields.result",
                            "source": "$searchFields.result"
                        },
                        "targetForm": {
                            "accessors": ["$queryForm"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "$queryForm",
                            "source": "$queryForm"
                        }
                    },
                    "name": "populateWhereClause",
                    "position": "-20,330",
                    "title": "Generate Where Clause",
                    "transitions": [
                        {
                            "id": 408,
                            "inputs": {},
                            "position": "100,400 100,450",
                            "target": { "id": 358 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:forms::SetFormElementItems",
                    "description": "",
                    "id": 376,
                    "inputs": {
                        "elementName": {
                            "accessors": ["$populateEventData"],
                            "annotations": [
                                { "count": 18, "index": 0, "kind": "idref" }
                            ],
                            "code": "$populateEventData.elementId",
                            "source": "$populateEventData.elementId"
                        },
                        "form": {
                            "accessors": ["$$form"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$form",
                            "source": "$$form"
                        },
                        "items": {
                            "accessors": ["$populateFeatureFormItems"],
                            "annotations": [
                                { "count": 25, "index": 0, "kind": "idref" }
                            ],
                            "code": "$populateFeatureFormItems.items",
                            "source": "$populateFeatureFormItems.items"
                        }
                    },
                    "position": "240,1760",
                    "title": "Set Form Element Items"
                },
                {
                    "action": "gcx:wf:forms::SetFormElementItems",
                    "id": 378,
                    "inputs": {
                        "elementName": {
                            "accessors": ["$populateEventData"],
                            "annotations": [
                                { "count": 18, "index": 0, "kind": "idref" }
                            ],
                            "code": "$populateEventData.elementId",
                            "source": "$populateEventData.elementId"
                        },
                        "form": {
                            "accessors": ["$$form"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$form",
                            "source": "$$form"
                        },
                        "items": {
                            "accessors": ["$populateCodedFormItems"],
                            "annotations": [
                                { "count": 23, "index": 0, "kind": "idref" }
                            ],
                            "code": "$populateCodedFormItems.items",
                            "source": "$populateCodedFormItems.items"
                        }
                    },
                    "position": "-290,1570",
                    "title": "Set Form Element Items"
                },
                {
                    "action": "gcx:wf:core::Evaluate",
                    "id": 380,
                    "inputs": {
                        "expression": {
                            "accessors": [
                                "$searchFields",
                                "$populateEventData"
                            ],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" },
                                { "count": 18, "index": 41, "kind": "idref" }
                            ],
                            "code": "$searchFields.result.find(function (x) { return x.field === $populateEventData.elementId; })",
                            "source": "$searchFields.result.find(x=> x.field ===$populateEventData.elementId)"
                        }
                    },
                    "name": "populateSearchField",
                    "position": "-20,210",
                    "title": "Evaluate Expression",
                    "transitions": [
                        {
                            "id": 414,
                            "inputs": {},
                            "position": "100,280 100,330",
                            "target": { "id": 374 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "id": 382,
                    "inputs": {},
                    "position": "10,-190",
                    "purpose": "start",
                    "title": "Subworkflow",
                    "transitions": [
                        {
                            "id": 416,
                            "inputs": {},
                            "position": "100,-130 100,-70",
                            "sourceConnector": "bottom",
                            "target": { "id": 384 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:forms::GetFormEventData",
                    "id": 384,
                    "inputs": {
                        "form": {
                            "accessors": ["$$form"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$form",
                            "source": "$$form"
                        }
                    },
                    "name": "populateEventData",
                    "position": "-20,-70",
                    "title": "Get Form Event Data",
                    "transitions": [
                        {
                            "id": 418,
                            "inputs": {},
                            "position": "100,0 100,50",
                            "target": { "id": 386 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::If",
                    "id": 386,
                    "inputs": {
                        "condition": {
                            "accessors": ["$populateEvent"],
                            "annotations": [
                                { "count": 14, "index": 2, "kind": "idref" }
                            ],
                            "code": "!!$populateEvent.arguments",
                            "source": "!!$populateEvent.arguments"
                        }
                    },
                    "position": "40,50",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "false",
                            "id": 420,
                            "inputs": {},
                            "position": "160,80 180,80 180,190 100,190 100,210",
                            "sourceConnector": "right",
                            "target": { "id": 380 },
                            "targetConnector": "top"
                        },
                        {
                            "branch": "true",
                            "id": 422,
                            "inputs": {},
                            "position": "40,80 -110,80 -110,110",
                            "sourceConnector": "left",
                            "target": { "id": 388 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::SetProperty",
                    "id": 388,
                    "inputs": {
                        "object": {
                            "accessors": ["$populateEventData"],
                            "annotations": [
                                { "count": 18, "index": 0, "kind": "idref" }
                            ],
                            "code": "$populateEventData",
                            "source": "$populateEventData "
                        },
                        "propertyName": "elementId",
                        "propertyValue": {
                            "accessors": ["$populateEvent"],
                            "annotations": [
                                { "count": 14, "index": 0, "kind": "idref" }
                            ],
                            "code": "$populateEvent.arguments.elementId",
                            "source": "$populateEvent.arguments.elementId"
                        }
                    },
                    "position": "-230,110",
                    "title": "Set Property",
                    "transitions": [
                        {
                            "id": 424,
                            "inputs": {},
                            "position": "-110,140 -110,190 100,190 100,210",
                            "sourceConnector": "bottom",
                            "target": { "id": 380 },
                            "targetConnector": "top"
                        }
                    ]
                }
            ]
        },
        {
            "id": 397,
            "steps": [
                {
                    "id": 399,
                    "inputs": {},
                    "position": "0,0",
                    "purpose": "start",
                    "title": "Subworkflow",
                    "transitions": [
                        {
                            "id": 453,
                            "inputs": {},
                            "position": "90,60 90,110",
                            "target": { "id": 447 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core:loop:ForEach",
                    "id": 447,
                    "inputs": {
                        "items": {
                            "accessors": ["$queryForm"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "$queryForm.state",
                            "source": "$queryForm.state"
                        }
                    },
                    "name": "elementsLoop",
                    "position": "-30,110",
                    "title": "For Each",
                    "transitions": [
                        {
                            "id": 493,
                            "inputs": {},
                            "position": "90,230 90,280",
                            "target": { "id": 491 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::SetWorkflowOutput",
                    "id": 491,
                    "inputs": {
                        "name": "searchFields",
                        "value": {
                            "accessors": ["$searchFields"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" }
                            ],
                            "code": "$searchFields.result",
                            "source": "$searchFields.result"
                        }
                    },
                    "position": "-30,280",
                    "title": "Set Workflow Output"
                }
            ]
        },
        {
            "id": 407,
            "steps": [
                {
                    "id": 411,
                    "inputs": {},
                    "position": "0,0",
                    "purpose": "start",
                    "title": "For Each",
                    "transitions": [
                        {
                            "id": 431,
                            "inputs": {},
                            "position": "90,60 90,140",
                            "target": { "id": 419 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::ConvertToJson",
                    "id": 415,
                    "inputs": {
                        "object": {
                            "accessors": ["$elementsLoop"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" }
                            ],
                            "code": "$elementsLoop.item",
                            "source": "$elementsLoop.item"
                        }
                    },
                    "name": "elementJson",
                    "position": "-20,350",
                    "title": "Convert To JSON",
                    "transitions": [
                        {
                            "id": 439,
                            "inputs": {},
                            "position": "100,420 100,480",
                            "target": { "id": 427 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::If",
                    "id": 419,
                    "inputs": {
                        "condition": {
                            "accessors": ["$searchFields", "$elementsLoop"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" },
                                { "count": 13, "index": 42, "kind": "idref" }
                            ],
                            "code": "$searchFields.result.some(function (x) { return x.field === $elementsLoop.key; })",
                            "source": "$searchFields.result.some(x=> x.field === $elementsLoop.key)"
                        }
                    },
                    "position": "30,140",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "true",
                            "id": 435,
                            "inputs": {},
                            "position": "30,170 10,170 10,330 100,330 100,350",
                            "target": { "id": 415 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Evaluate",
                    "id": 423,
                    "inputs": {
                        "expression": {
                            "accessors": [
                                "$searchFields",
                                "$elementsLoop",
                                "$clonedElement"
                            ],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" },
                                { "count": 13, "index": 42, "kind": "idref" },
                                { "count": 14, "index": 67, "kind": "idref" }
                            ],
                            "code": "$searchFields.result.find(function (x) { return x.field === $elementsLoop.key; }).value = $clonedElement.result.value",
                            "source": "$searchFields.result.find(x=> x.field === $elementsLoop.key).value=$clonedElement.result.value"
                        }
                    },
                    "name": "setValue",
                    "position": "-20,600",
                    "title": "Set Current Value"
                },
                {
                    "action": "gcx:wf:core::ParseJson",
                    "id": 427,
                    "inputs": {
                        "json": {
                            "accessors": ["$elementJson"],
                            "annotations": [
                                { "count": 12, "index": 0, "kind": "idref" }
                            ],
                            "code": "$elementJson.json",
                            "source": "$elementJson.json"
                        }
                    },
                    "name": "clonedElement",
                    "position": "-20,480",
                    "title": "Parse JSON",
                    "transitions": [
                        {
                            "id": 443,
                            "inputs": {},
                            "position": "100,550 100,600",
                            "target": { "id": 423 }
                        }
                    ]
                }
            ]
        },
        {
            "id": 426,
            "steps": [
                {
                    "id": 428,
                    "inputs": {},
                    "position": "0,0",
                    "purpose": "start",
                    "title": "Subworkflow",
                    "transitions": [
                        {
                            "id": 442,
                            "inputs": {},
                            "position": "90,60 90,150",
                            "sourceConnector": "bottom",
                            "target": { "id": 430 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:forms::GetFormEventData",
                    "id": 430,
                    "inputs": {
                        "form": {
                            "accessors": ["$$form"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$form",
                            "source": "$$form"
                        }
                    },
                    "name": "validateEventData",
                    "position": "-30,150",
                    "title": "Get Form Event Data",
                    "transitions": [
                        {
                            "id": 444,
                            "inputs": {},
                            "position": "90,220 90,270",
                            "target": { "id": 432 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Log",
                    "id": 432,
                    "inputs": {
                        "message": {
                            "accessors": [],
                            "code": "\"Validae Event\"",
                            "source": "\"Validae Event\""
                        }
                    },
                    "position": "-30,270",
                    "title": "Log",
                    "transitions": [
                        {
                            "id": 446,
                            "inputs": {},
                            "position": "90,300 90,350",
                            "target": { "id": 434 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Log",
                    "id": 434,
                    "inputs": {
                        "message": {
                            "accessors": ["$validateEventData"],
                            "annotations": [
                                { "count": 18, "index": 0, "kind": "idref" }
                            ],
                            "code": "$validateEventData",
                            "source": "$validateEventData"
                        }
                    },
                    "position": "-30,350",
                    "title": "Log",
                    "transitions": [
                        {
                            "id": 448,
                            "inputs": {},
                            "position": "90,380 90,430",
                            "target": { "id": 436 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::If",
                    "id": 436,
                    "inputs": {
                        "condition": {
                            "accessors": ["$hasSubWorkflow"],
                            "annotations": [
                                { "count": 15, "index": 0, "kind": "idref" }
                            ],
                            "code": "$hasSubWorkflow.result",
                            "source": "$hasSubWorkflow.result"
                        }
                    },
                    "position": "30,430",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "false",
                            "id": 450,
                            "inputs": {},
                            "position": "150,460 170,460 170,790 100,790 100,810",
                            "sourceConnector": "right",
                            "target": { "id": 438 },
                            "targetConnector": "top"
                        },
                        {
                            "branch": "true",
                            "id": 452,
                            "inputs": {},
                            "position": "30,460 -90,460 -90,600",
                            "sourceConnector": "left",
                            "target": { "id": 440 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:forms::PropagateFormEvent",
                    "id": 438,
                    "inputs": {
                        "form": {
                            "accessors": ["$$form"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$form",
                            "source": "$$form"
                        }
                    },
                    "position": "-20,810",
                    "title": "Propagate Form Event"
                },
                {
                    "action": "gcx:wf:core::RunWorkflow",
                    "id": 440,
                    "inputs": {
                        "arguments": {
                            "accessors": [
                                "$searchFields",
                                "$changedEventData",
                                "$queryForm"
                            ],
                            "annotations": [
                                { "count": 13, "index": 14, "kind": "idref" },
                                { "count": 17, "index": 46, "kind": "idref" },
                                { "count": 10, "index": 75, "kind": "idref" }
                            ],
                            "code": "{ searchFields: $searchFields.result, eventData: $changedEventData, formState: $queryForm.state, type: \"validate\" }",
                            "source": "{searchFields:$searchFields.result, eventData:$changedEventData, formState:$queryForm.state, type: \"validate\"}"
                        },
                        "url": {
                            "accessors": ["$eventSubWorkflow"],
                            "annotations": [
                                { "count": 17, "index": 0, "kind": "idref" }
                            ],
                            "code": "$eventSubWorkflow.result",
                            "source": "$eventSubWorkflow.result"
                        }
                    },
                    "name": "runValidateSubWorkflow",
                    "position": "-210,600",
                    "title": "Run Workflow",
                    "transitions": [
                        {
                            "id": 454,
                            "inputs": {},
                            "position": "-90,670 -90,790 100,790 100,810",
                            "sourceConnector": "bottom",
                            "target": { "id": 438 },
                            "targetConnector": "top"
                        }
                    ]
                }
            ]
        },
        {
            "id": 456,
            "steps": [
                {
                    "id": 458,
                    "inputs": {},
                    "position": "0,0",
                    "purpose": "start",
                    "title": "Subworkflow",
                    "transitions": [
                        {
                            "id": 472,
                            "inputs": {},
                            "position": "90,60 90,130",
                            "sourceConnector": "bottom",
                            "target": { "id": 460 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:forms::GetFormEventData",
                    "id": 460,
                    "inputs": {
                        "form": {
                            "accessors": ["$$form"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$form",
                            "source": "$$form"
                        }
                    },
                    "name": "clickedEventData",
                    "position": "-30,130",
                    "title": "Get Form Event Data",
                    "transitions": [
                        {
                            "id": 474,
                            "inputs": {},
                            "position": "90,200 90,250",
                            "target": { "id": 462 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Log",
                    "id": 462,
                    "inputs": {
                        "message": {
                            "accessors": [],
                            "code": "\"Clicked Event\"",
                            "source": "\"Clicked Event\""
                        }
                    },
                    "position": "-30,250",
                    "title": "Log",
                    "transitions": [
                        {
                            "id": 476,
                            "inputs": {},
                            "position": "90,280 90,330",
                            "target": { "id": 464 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Log",
                    "id": 464,
                    "inputs": {
                        "message": {
                            "accessors": ["$clickedEventData"],
                            "annotations": [
                                { "count": 17, "index": 0, "kind": "idref" }
                            ],
                            "code": "$clickedEventData",
                            "source": "$clickedEventData"
                        }
                    },
                    "position": "-30,330",
                    "title": "Log",
                    "transitions": [
                        {
                            "id": 478,
                            "inputs": {},
                            "position": "90,360 90,410",
                            "target": { "id": 466 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::If",
                    "id": 466,
                    "inputs": {
                        "condition": {
                            "accessors": ["$hasSubWorkflow"],
                            "annotations": [
                                { "count": 15, "index": 0, "kind": "idref" }
                            ],
                            "code": "$hasSubWorkflow.result",
                            "source": "$hasSubWorkflow.result"
                        }
                    },
                    "position": "30,410",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "false",
                            "id": 480,
                            "inputs": {},
                            "position": "150,440 170,440 170,770 100,770 100,790",
                            "sourceConnector": "right",
                            "target": { "id": 468 },
                            "targetConnector": "top"
                        },
                        {
                            "branch": "true",
                            "id": 482,
                            "inputs": {},
                            "position": "30,440 -140,440 -140,540",
                            "sourceConnector": "left",
                            "target": { "id": 470 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:forms::PropagateFormEvent",
                    "id": 468,
                    "inputs": {
                        "form": {
                            "accessors": ["$$form"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$form",
                            "source": "$$form"
                        }
                    },
                    "position": "-20,790",
                    "title": "Propagate Form Event"
                },
                {
                    "action": "gcx:wf:core::RunWorkflow",
                    "id": 470,
                    "inputs": {
                        "arguments": {
                            "accessors": [
                                "$searchFields",
                                "$changedEventData",
                                "$queryForm"
                            ],
                            "annotations": [
                                { "count": 13, "index": 14, "kind": "idref" },
                                { "count": 17, "index": 46, "kind": "idref" },
                                { "count": 10, "index": 75, "kind": "idref" }
                            ],
                            "code": "{ searchFields: $searchFields.result, eventData: $changedEventData, formState: $queryForm.state, type: \"clicked\" }",
                            "source": "{searchFields:$searchFields.result, eventData:$changedEventData, formState:$queryForm.state, type: \"clicked\"}"
                        },
                        "url": {
                            "accessors": ["$eventSubWorkflow"],
                            "annotations": [
                                { "count": 17, "index": 0, "kind": "idref" }
                            ],
                            "code": "$eventSubWorkflow.result",
                            "source": "$eventSubWorkflow.result"
                        }
                    },
                    "name": "runClickedSubWorkflow",
                    "position": "-260,540",
                    "title": "Run Workflow",
                    "transitions": [
                        {
                            "id": 484,
                            "inputs": {},
                            "position": "-140,610 -140,770 100,770 100,790",
                            "sourceConnector": "bottom",
                            "target": { "id": 468 },
                            "targetConnector": "top"
                        }
                    ]
                }
            ]
        },
        {
            "id": 486,
            "steps": [
                {
                    "id": 488,
                    "inputs": {},
                    "position": "0,0",
                    "purpose": "start",
                    "title": "Subworkflow",
                    "transitions": [
                        {
                            "id": 502,
                            "inputs": {},
                            "position": "90,60 90,110",
                            "target": { "id": 490 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:forms::GetFormEventData",
                    "id": 490,
                    "inputs": {
                        "form": {
                            "accessors": ["$$form"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$form",
                            "source": "$$form"
                        }
                    },
                    "name": "changedEventData",
                    "position": "-30,110",
                    "title": "Get Form Event Data",
                    "transitions": [
                        {
                            "id": 504,
                            "inputs": {},
                            "position": "90,180 90,230",
                            "target": { "id": 492 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Log",
                    "id": 492,
                    "inputs": {
                        "message": {
                            "accessors": [],
                            "code": "\"Changed Event\"",
                            "source": "\"Changed Event\""
                        }
                    },
                    "position": "-30,230",
                    "title": "Log",
                    "transitions": [
                        {
                            "id": 506,
                            "inputs": {},
                            "position": "90,260 90,310",
                            "target": { "id": 494 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Log",
                    "id": 494,
                    "inputs": {
                        "message": {
                            "accessors": ["$changedEventData"],
                            "annotations": [
                                { "count": 17, "index": 0, "kind": "idref" }
                            ],
                            "code": "$changedEventData",
                            "source": "$changedEventData"
                        }
                    },
                    "position": "-30,310",
                    "title": "Log",
                    "transitions": [
                        {
                            "id": 508,
                            "inputs": {},
                            "position": "90,340 90,390",
                            "target": { "id": 496 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::If",
                    "id": 496,
                    "inputs": {
                        "condition": {
                            "accessors": ["$hasSubWorkflow"],
                            "annotations": [
                                { "count": 15, "index": 0, "kind": "idref" }
                            ],
                            "code": "$hasSubWorkflow.result",
                            "source": "$hasSubWorkflow.result"
                        }
                    },
                    "position": "30,390",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "false",
                            "id": 510,
                            "inputs": {},
                            "position": "150,420 170,420 170,680 50,680 50,700",
                            "sourceConnector": "right",
                            "target": { "id": 498 },
                            "targetConnector": "top"
                        },
                        {
                            "branch": "true",
                            "id": 512,
                            "inputs": {},
                            "position": "30,420 -90,420 -90,560",
                            "sourceConnector": "left",
                            "target": { "id": 500 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:forms::PropagateFormEvent",
                    "id": 498,
                    "inputs": {
                        "form": {
                            "accessors": ["$$form"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$form",
                            "source": "$$form"
                        }
                    },
                    "position": "-70,700",
                    "title": "Propagate Form Event"
                },
                {
                    "action": "gcx:wf:core::RunWorkflow",
                    "id": 500,
                    "inputs": {
                        "arguments": {
                            "accessors": [
                                "$searchFields",
                                "$changedEventData",
                                "$queryForm"
                            ],
                            "annotations": [
                                { "count": 13, "index": 14, "kind": "idref" },
                                { "count": 17, "index": 46, "kind": "idref" },
                                { "count": 10, "index": 75, "kind": "idref" }
                            ],
                            "code": "{ searchFields: $searchFields.result, eventData: $changedEventData, formState: $queryForm.state, type: \"changed\" }",
                            "source": "{searchFields:$searchFields.result, eventData:$changedEventData, formState:$queryForm.state, type: \"changed\"}"
                        },
                        "url": {
                            "accessors": ["$eventSubWorkflow"],
                            "annotations": [
                                { "count": 17, "index": 0, "kind": "idref" }
                            ],
                            "code": "$eventSubWorkflow.result",
                            "source": "$eventSubWorkflow.result"
                        }
                    },
                    "name": "runChangedSubWorkflow",
                    "position": "-210,560",
                    "title": "Run Workflow",
                    "transitions": [
                        {
                            "id": 514,
                            "inputs": {},
                            "position": "-90,630 -90,680 50,680 50,700",
                            "sourceConnector": "bottom",
                            "target": { "id": 498 },
                            "targetConnector": "top"
                        }
                    ]
                }
            ]
        },
        {
            "id": 516,
            "steps": [
                {
                    "action": "gcx:wf:core:subworkflow:RunSubworkflow",
                    "id": 455,
                    "inputs": {
                        "subworkflowId": {
                            "accessors": ["activities"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "activities.setState",
                            "source": "activities.setState"
                        }
                    },
                    "name": "runSetState",
                    "position": "-30,790",
                    "title": "Run Subworkflow"
                },
                {
                    "action": "uuid:fc5de4bd-b399-4353-82ea-cbf393a350b3::GenerateWhereClause",
                    "id": 518,
                    "inputs": {
                        "layer": {
                            "accessors": ["$layer"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$layer.result",
                            "source": "$layer.result"
                        },
                        "queryFields": {
                            "accessors": ["$searchFields"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" }
                            ],
                            "code": "$searchFields.result",
                            "source": "$searchFields.result"
                        },
                        "targetForm": {
                            "accessors": ["$queryForm"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "$queryForm",
                            "source": "$queryForm"
                        }
                    },
                    "name": "finalWhereClause",
                    "position": "-30,-130",
                    "title": "Generate Where Clause",
                    "transitions": [
                        {
                            "id": 540,
                            "inputs": {},
                            "position": "90,-60 90,-20",
                            "sourceConnector": "bottom",
                            "target": { "id": 520 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:arcgis:query:QueryTask",
                    "id": 520,
                    "inputs": {
                        "outFields": "*",
                        "returnGeometry": true,
                        "url": {
                            "accessors": ["$layerUrl"],
                            "annotations": [
                                { "count": 9, "index": 0, "kind": "idref" }
                            ],
                            "code": "$layerUrl.result",
                            "source": "$layerUrl.result"
                        },
                        "where": {
                            "accessors": ["$finalWhereClause"],
                            "annotations": [
                                { "count": 17, "index": 0, "kind": "idref" }
                            ],
                            "code": "$finalWhereClause.result",
                            "source": "$finalWhereClause.result"
                        }
                    },
                    "name": "layerQuery",
                    "position": "-30,-20",
                    "title": "Query Layer",
                    "transitions": [
                        {
                            "id": 542,
                            "inputs": {},
                            "position": "90,50 90,110",
                            "sourceConnector": "bottom",
                            "target": { "id": 522 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::If",
                    "id": 522,
                    "inputs": {
                        "condition": {
                            "accessors": ["$layerQuery"],
                            "annotations": [
                                { "count": 11, "index": 0, "kind": "idref" }
                            ],
                            "code": "$layerQuery.features.length > 0",
                            "source": "$layerQuery.features.length > 0"
                        }
                    },
                    "position": "30,110",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "true",
                            "id": 544,
                            "inputs": {},
                            "position": "30,140 10,140 10,260 90,260 90,280",
                            "sourceConnector": "left",
                            "target": { "id": 524 },
                            "targetConnector": "top"
                        },
                        {
                            "branch": "false",
                            "id": 546,
                            "inputs": {},
                            "position": "150,140 460,140 460,270",
                            "sourceConnector": "right",
                            "target": { "id": 526 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:app::RunOperation",
                    "id": 524,
                    "inputs": {
                        "operationName": "results.from-graphics",
                        "operationParameter": {
                            "accessors": ["$layerQuery", "$layer", "$mapInfo"],
                            "annotations": [
                                { "count": 11, "index": 11, "kind": "idref" },
                                { "count": 6, "index": 39, "kind": "idref" },
                                { "count": 8, "index": 61, "kind": "idref" }
                            ],
                            "code": "{ graphics: $layerQuery.features, layer: $layer.result, maps: [$mapInfo.map.mapExtension] }",
                            "source": "{graphics: $layerQuery.features, layer:$layer.result, maps: [$mapInfo.map.mapExtension]}"
                        }
                    },
                    "name": "resultSet",
                    "position": "-30,280",
                    "title": "Get VertiGIS Features",
                    "transitions": [
                        {
                            "id": 548,
                            "inputs": {},
                            "position": "90,350 90,400",
                            "target": { "id": 528 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::SetProperty",
                    "id": 526,
                    "inputs": {
                        "object": {
                            "accessors": ["$noResults"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "$noResults",
                            "source": "$noResults"
                        },
                        "propertyName": "result",
                        "propertyValue": true
                    },
                    "position": "340,270",
                    "title": "Set noResults to true"
                },
                {
                    "action": "gcx:wf:core::AddItems",
                    "id": 528,
                    "inputs": {
                        "collection": {
                            "accessors": ["$resultSet"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "$resultSet.result",
                            "source": "$resultSet.result"
                        },
                        "itemsToAdd": {
                            "accessors": ["$resultSet"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "$resultSet.result",
                            "source": "$resultSet.result"
                        }
                    },
                    "position": "-30,400",
                    "title": "Add Items",
                    "transitions": [
                        {
                            "id": 550,
                            "inputs": {},
                            "position": "90,430 90,480",
                            "sourceConnector": "bottom",
                            "target": { "id": 530 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:app::RunCommand",
                    "id": 530,
                    "inputs": {
                        "commandName": "map.go-to-geometry",
                        "commandParameter": {
                            "accessors": ["$resultSet"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "$resultSet.result",
                            "source": "$resultSet.result"
                        }
                    },
                    "position": "-30,480",
                    "title": "Zoom to Features",
                    "transitions": [
                        {
                            "id": 552,
                            "inputs": {},
                            "position": "90,510 90,560",
                            "target": { "id": 532 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::SetProperty",
                    "id": 532,
                    "inputs": {
                        "object": {
                            "accessors": ["$noResults"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "$noResults",
                            "source": "$noResults"
                        },
                        "propertyName": "result",
                        "propertyValue": false
                    },
                    "position": "-30,560",
                    "title": "Set noResults to false",
                    "transitions": [
                        {
                            "id": 554,
                            "inputs": {},
                            "position": "90,590 90,630",
                            "target": { "id": 534 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:app::RunCommand",
                    "id": 534,
                    "inputs": {
                        "commandName": "results.display",
                        "commandParameter": {
                            "accessors": ["$resultSet"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "$resultSet.result",
                            "source": "$resultSet.result"
                        }
                    },
                    "position": "-30,630",
                    "title": "Display results",
                    "transitions": [
                        {
                            "id": 556,
                            "inputs": {},
                            "position": "90,660 90,710",
                            "target": { "id": 536 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::SetWorkflowOutput",
                    "id": 536,
                    "inputs": {
                        "name": "queryResult",
                        "value": {
                            "accessors": ["$resultSet"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "$resultSet.result",
                            "source": "$resultSet.result"
                        }
                    },
                    "position": "-30,710",
                    "title": "Set Workflow Output",
                    "transitions": [
                        {
                            "id": 457,
                            "inputs": {},
                            "position": "90,740 90,790",
                            "target": { "id": 455 }
                        }
                    ]
                },
                {
                    "id": 538,
                    "inputs": {},
                    "position": "0,-240",
                    "purpose": "start",
                    "title": "Container",
                    "transitions": [
                        {
                            "id": 558,
                            "inputs": {},
                            "position": "90,-180 90,-130",
                            "target": { "id": 518 }
                        }
                    ]
                }
            ]
        },
        {
            "id": 560,
            "steps": [
                {
                    "id": 562,
                    "inputs": {},
                    "position": "0,0",
                    "purpose": "start",
                    "title": "Subworkflow",
                    "transitions": [
                        {
                            "id": 578,
                            "inputs": {},
                            "position": "90,60 90,110",
                            "target": { "id": 564 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::CreateValue",
                    "id": 564,
                    "inputs": {
                        "expression": {
                            "accessors": ["$generateQueryFields"],
                            "annotations": [
                                { "count": 20, "index": 0, "kind": "idref" }
                            ],
                            "code": "$generateQueryFields.arguments[\"field\"]",
                            "source": "$generateQueryFields.arguments[\"field\"]"
                        }
                    },
                    "name": "targetField",
                    "position": "-30,110",
                    "title": "Create Value",
                    "transitions": [
                        {
                            "id": 580,
                            "inputs": {},
                            "position": "90,180 90,230",
                            "target": { "id": 566 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::CreateValue",
                    "id": 566,
                    "inputs": {
                        "expression": {
                            "accessors": ["$targetField"],
                            "annotations": [
                                { "count": 12, "index": 1, "kind": "idref" }
                            ],
                            "code": "[$targetField.result]",
                            "source": "[$targetField.result]"
                        }
                    },
                    "name": "fieldsArray",
                    "position": "-30,230",
                    "title": "Create Value",
                    "transitions": [
                        {
                            "id": 582,
                            "inputs": {},
                            "position": "90,300 90,350",
                            "sourceConnector": "bottom",
                            "target": { "id": 568 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::If",
                    "id": 568,
                    "inputs": {
                        "condition": {
                            "accessors": ["$layer"],
                            "annotations": [
                                { "count": 6, "index": 2, "kind": "idref" }
                            ],
                            "code": "!!$layer.result.subtypeField",
                            "source": "!!$layer.result.subtypeField"
                        }
                    },
                    "position": "30,350",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "true",
                            "id": 584,
                            "inputs": {},
                            "position": "30,380 -130,380 -130,500",
                            "sourceConnector": "left",
                            "target": { "id": 570 },
                            "targetConnector": "top"
                        },
                        {
                            "branch": "false",
                            "id": 586,
                            "inputs": {},
                            "position": "150,380 240,380 240,460",
                            "sourceConnector": "right",
                            "target": { "id": 572 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::AddItem",
                    "id": 570,
                    "inputs": {
                        "collection": {
                            "accessors": ["$fieldsArray"],
                            "annotations": [
                                { "count": 12, "index": 0, "kind": "idref" }
                            ],
                            "code": "$fieldsArray.result",
                            "source": "$fieldsArray.result"
                        },
                        "item": {
                            "accessors": ["$layer"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$layer.result.subtypeField",
                            "source": "$layer.result.subtypeField"
                        }
                    },
                    "position": "-250,500",
                    "title": "Add Item",
                    "transitions": [
                        {
                            "id": 588,
                            "inputs": {},
                            "position": "-130,530 -130,730 140,730 140,750",
                            "sourceConnector": "bottom",
                            "target": { "id": 574 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::If",
                    "id": 572,
                    "inputs": {
                        "condition": {
                            "accessors": ["$layer", "$layer"],
                            "annotations": [
                                { "count": 6, "index": 2, "kind": "idref" },
                                { "count": 6, "index": 28, "kind": "idref" }
                            ],
                            "code": "!!$layer.result.parent && !!$layer.result.parent.subtypeField",
                            "source": "!!$layer.result.parent && !!$layer.result.parent.subtypeField"
                        }
                    },
                    "position": "180,460",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "true",
                            "id": 590,
                            "inputs": {},
                            "position": "180,490 140,490 140,600",
                            "sourceConnector": "left",
                            "target": { "id": 576 },
                            "targetConnector": "top"
                        },
                        {
                            "branch": "false",
                            "id": 592,
                            "inputs": {},
                            "position": "300,490 320,490 320,730 140,730 140,750",
                            "sourceConnector": "right",
                            "target": { "id": 574 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Evaluate",
                    "id": 574,
                    "inputs": {
                        "expression": {
                            "accessors": [
                                "$generateQueryFields",
                                "$fieldsArray"
                            ],
                            "annotations": [
                                { "count": 20, "index": 0, "kind": "idref" },
                                { "count": 12, "index": 40, "kind": "idref" }
                            ],
                            "code": "$generateQueryFields.setResult({ fields: $fieldsArray.result })",
                            "source": "$generateQueryFields.setResult({fields: $fieldsArray.result})"
                        }
                    },
                    "name": "setFieldsOutput",
                    "position": "20,750",
                    "title": "Evaluate Expression"
                },
                {
                    "action": "gcx:wf:core::AddItem",
                    "id": 576,
                    "inputs": {
                        "collection": {
                            "accessors": ["$fieldsArray"],
                            "annotations": [
                                { "count": 12, "index": 0, "kind": "idref" }
                            ],
                            "code": "$fieldsArray.result",
                            "source": "$fieldsArray.result"
                        },
                        "item": {
                            "accessors": ["$layer"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$layer.result.parent.subtypeField",
                            "source": "$layer.result.parent.subtypeField"
                        }
                    },
                    "position": "20,600",
                    "title": "Add Item",
                    "transitions": [
                        {
                            "id": 594,
                            "inputs": {},
                            "position": "140,630 140,750",
                            "sourceConnector": "bottom",
                            "target": { "id": 574 },
                            "targetConnector": "top"
                        }
                    ]
                }
            ]
        },
        {
            "id": 596,
            "steps": [
                {
                    "action": "uuid:fc5de4bd-b399-4353-82ea-cbf393a350b3::AddQueryElements",
                    "id": 598,
                    "inputs": {
                        "description": {
                            "accessors": ["$formDescription"],
                            "annotations": [
                                { "count": 16, "index": 0, "kind": "idref" }
                            ],
                            "code": "$formDescription.result",
                            "source": "$formDescription.result"
                        },
                        "form": {
                            "accessors": ["$queryForm"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "$queryForm",
                            "source": "$queryForm"
                        },
                        "layer": {
                            "accessors": ["$layer"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$layer.result",
                            "source": "$layer.result"
                        },
                        "searchFields": {
                            "accessors": ["$searchFields"],
                            "annotations": [
                                { "count": 13, "index": 0, "kind": "idref" }
                            ],
                            "code": "$searchFields.result",
                            "source": "$searchFields.result"
                        },
                        "title": {
                            "accessors": ["$formTitle"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "$formTitle.result",
                            "source": "$formTitle.result"
                        }
                    },
                    "name": "addConfigurableQueryElements2",
                    "position": "-30,110",
                    "title": "Add Configurable Query Elements"
                },
                {
                    "id": 600,
                    "inputs": {},
                    "position": "0,0",
                    "purpose": "start",
                    "title": "Event",
                    "transitions": [
                        {
                            "id": 272,
                            "inputs": {},
                            "position": "90,60 90,110",
                            "target": { "id": 598 }
                        }
                    ]
                }
            ],
            "title": "load-header"
        },
        {
            "id": 604,
            "steps": [
                {
                    "id": 606,
                    "inputs": {},
                    "position": "0,0",
                    "purpose": "start",
                    "title": "Event",
                    "transitions": [
                        {
                            "id": 614,
                            "inputs": {},
                            "position": "90,60 90,110",
                            "target": { "id": 608 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::If",
                    "id": 608,
                    "inputs": {
                        "condition": {
                            "accessors": ["$noResults"],
                            "annotations": [
                                { "count": 10, "index": 0, "kind": "idref" }
                            ],
                            "code": "$noResults.result",
                            "source": "$noResults.result"
                        }
                    },
                    "position": "30,110",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "true",
                            "id": 616,
                            "inputs": {},
                            "position": "30,140 -220,140 -220,250",
                            "target": { "id": 610 },
                            "targetConnector": "top"
                        },
                        {
                            "branch": "false",
                            "id": 618,
                            "inputs": {},
                            "position": "150,140 360,140 360,270",
                            "sourceConnector": "right",
                            "target": { "id": 612 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:forms::SetFormElementError",
                    "id": 610,
                    "inputs": {
                        "error": {
                            "accessors": ["getText"],
                            "code": "getText(values.key)",
                            "source": "@queryForm-error-no-results",
                            "values": { "key": "@queryForm-error-no-results" }
                        },
                        "form": {
                            "accessors": ["$$form"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$form",
                            "source": "$$form"
                        }
                    },
                    "position": "-340,250",
                    "title": "Set Form Element Error"
                },
                {
                    "action": "gcx:wf:forms::ClearFormElementError",
                    "id": 612,
                    "inputs": {
                        "form": {
                            "accessors": ["$$form"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$$form",
                            "source": "$$form"
                        }
                    },
                    "position": "240,270",
                    "title": "Clear Form Element Error"
                }
            ],
            "title": "load-footer"
        },
        {
            "id": 620,
            "steps": [
                {
                    "action": "gcx:wf:core::If",
                    "id": 622,
                    "inputs": {
                        "condition": {
                            "accessors": ["$layer"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$layer.result.type === \"subtype-sublayer\"",
                            "source": "$layer.result.type === \"subtype-sublayer\""
                        }
                    },
                    "position": "30,810",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "true",
                            "id": 644,
                            "inputs": {},
                            "position": "30,840 -190,840 -190,1060",
                            "sourceConnector": "left",
                            "target": { "id": 624 },
                            "targetConnector": "top"
                        },
                        {
                            "branch": "false",
                            "id": 646,
                            "inputs": {},
                            "position": "150,840 220,840 220,1060",
                            "sourceConnector": "right",
                            "target": { "id": 626 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Evaluate",
                    "id": 624,
                    "inputs": {
                        "expression": {
                            "accessors": ["$layerUrl", "$layer", "$layer"],
                            "annotations": [
                                { "count": 9, "index": 0, "kind": "idref" },
                                { "count": 6, "index": 22, "kind": "idref" },
                                { "count": 6, "index": 50, "kind": "idref" }
                            ],
                            "code": "$layerUrl.result = \"\".concat($layer.result.parent.url, \"/\").concat($layer.result.parent.layerId)",
                            "source": "$layerUrl.result = `${$layer.result.parent.url}/${$layer.result.parent.layerId}`"
                        }
                    },
                    "name": "subtypeCase",
                    "position": "-310,1060",
                    "title": "Evaluate Expression"
                },
                {
                    "action": "gcx:wf:core::Evaluate",
                    "id": 626,
                    "inputs": {
                        "expression": {
                            "accessors": ["$layerUrl", "$layer", "$layer"],
                            "annotations": [
                                { "count": 9, "index": 0, "kind": "idref" },
                                { "count": 6, "index": 22, "kind": "idref" },
                                { "count": 6, "index": 43, "kind": "idref" }
                            ],
                            "code": "$layerUrl.result = \"\".concat($layer.result.url, \"/\").concat($layer.result.layerId)",
                            "source": "$layerUrl.result = `${$layer.result.url}/${$layer.result.layerId}`"
                        }
                    },
                    "name": "others",
                    "position": "100,1060",
                    "title": "Evaluate Expression"
                },
                {
                    "id": 628,
                    "inputs": {},
                    "position": "0,0",
                    "purpose": "start",
                    "title": "Container",
                    "transitions": [
                        {
                            "id": 648,
                            "inputs": {},
                            "position": "90,60 90,110",
                            "target": { "id": 630 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:arcgis::GetLayer",
                    "id": 630,
                    "inputs": {
                        "layerId": {
                            "accessors": ["$layerId"],
                            "annotations": [
                                { "count": 8, "index": 0, "kind": "idref" }
                            ],
                            "code": "$layerId.result",
                            "source": "$layerId.result"
                        }
                    },
                    "name": "targetLayer",
                    "position": "-30,110",
                    "title": "Get Layer",
                    "transitions": [
                        {
                            "id": 650,
                            "inputs": {},
                            "position": "90,180 90,230",
                            "target": { "id": 632 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::If",
                    "id": 632,
                    "inputs": {
                        "condition": {
                            "accessors": ["$targetLayer"],
                            "annotations": [
                                { "count": 12, "index": 1, "kind": "idref" }
                            ],
                            "code": "!$targetLayer.layer",
                            "source": "!$targetLayer.layer"
                        }
                    },
                    "position": "30,230",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "true",
                            "id": 652,
                            "inputs": {},
                            "position": "30,260 -40,260 -40,340",
                            "sourceConnector": "left",
                            "target": { "id": 634 },
                            "targetConnector": "top"
                        },
                        {
                            "branch": "false",
                            "id": 654,
                            "inputs": {},
                            "position": "150,260 220,260 220,340",
                            "sourceConnector": "right",
                            "target": { "id": 636 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Evaluate",
                    "description": "If the layer isn't found then search the map by layer title and layer ID",
                    "id": 634,
                    "inputs": {
                        "expression": {
                            "accessors": [
                                "$mapInfo",
                                "$layerId",
                                "$mapInfo",
                                "$layerId",
                                "$layerId"
                            ],
                            "annotations": [
                                { "count": 8, "index": 27, "kind": "idref" },
                                { "count": 8, "index": 75, "kind": "idref" },
                                { "count": 8, "index": 138, "kind": "idref" },
                                { "count": 8, "index": 277, "kind": "idref" },
                                { "count": 8, "index": 379, "kind": "idref" }
                            ],
                            "code": "(function () {\n    var layer = $mapInfo.map.map.allLayers.find(function (x) { return x.title === $layerId.result; });\n    if (layer == undefined) {\n        for (var _i = 0, _a = $mapInfo.map.map.allLayers.items; _i < _a.length; _i++) {\n            var l = _a[_i];\n            if (l.type === \"subtype-group\") {\n                var found = l.sublayers.items.some(function (x) { return x.title === $layerId.result; });\n                if (found) {\n                    layer = l.sublayers.items.find(function (x) { return x.title === $layerId.result; });\n                    ;\n                }\n            }\n        }\n    }\n    return layer;\n})()",
                            "source": "(function(){\n  var layer = $mapInfo.map.map.allLayers.find(x=> x.title === $layerId.result);\n  if(layer == undefined) {\n     for(var l of $mapInfo.map.map.allLayers.items) {\n        if(l.type === \"subtype-group\") {\n           var found = l.sublayers.items.some(x=> x.title === $layerId.result);\n           if(found) {\n              layer = l.sublayers.items.find(x=> x.title === $layerId.result);;\n           }\n\n\n        }\n      }\n  }\n\n  return layer;\n})()"
                        }
                    },
                    "name": "findLayerFunction",
                    "position": "-160,340",
                    "title": "Find layer function",
                    "transitions": [
                        {
                            "id": 656,
                            "inputs": {},
                            "position": "-40,470 -40,510",
                            "target": { "id": 638 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::SetProperty",
                    "id": 636,
                    "inputs": {
                        "object": {
                            "accessors": ["$layer"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$layer",
                            "source": "$layer"
                        },
                        "propertyName": "result",
                        "propertyValue": {
                            "accessors": ["$targetLayer"],
                            "annotations": [
                                { "count": 12, "index": 0, "kind": "idref" }
                            ],
                            "code": "$targetLayer.layer",
                            "source": "$targetLayer.layer"
                        }
                    },
                    "position": "100,340",
                    "title": "Set Property",
                    "transitions": [
                        {
                            "id": 658,
                            "inputs": {},
                            "position": "220,370 220,790 90,790 90,810",
                            "sourceConnector": "bottom",
                            "target": { "id": 622 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::If",
                    "id": 638,
                    "inputs": {
                        "condition": {
                            "accessors": ["$findLayerFunction"],
                            "annotations": [
                                { "count": 18, "index": 2, "kind": "idref" }
                            ],
                            "code": "!!$findLayerFunction.result",
                            "source": "!!$findLayerFunction.result"
                        }
                    },
                    "position": "-100,510",
                    "title": "If",
                    "transitions": [
                        {
                            "branch": "true",
                            "id": 660,
                            "inputs": {},
                            "position": "-100,540 -190,540 -190,660",
                            "sourceConnector": "left",
                            "target": { "id": 640 },
                            "targetConnector": "top"
                        },
                        {
                            "branch": "false",
                            "id": 662,
                            "inputs": {},
                            "position": "20,540 70,540 70,660",
                            "sourceConnector": "right",
                            "target": { "id": 642 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::SetProperty",
                    "id": 640,
                    "inputs": {
                        "object": {
                            "accessors": ["$layer"],
                            "annotations": [
                                { "count": 6, "index": 0, "kind": "idref" }
                            ],
                            "code": "$layer",
                            "source": "$layer"
                        },
                        "propertyName": "result",
                        "propertyValue": {
                            "accessors": ["$findLayerFunction"],
                            "annotations": [
                                { "count": 18, "index": 0, "kind": "idref" }
                            ],
                            "code": "$findLayerFunction.result",
                            "source": "$findLayerFunction.result"
                        }
                    },
                    "position": "-310,660",
                    "title": "Set Property",
                    "transitions": [
                        {
                            "id": 664,
                            "inputs": {},
                            "position": "-190,690 -190,790 90,790 90,810",
                            "sourceConnector": "bottom",
                            "target": { "id": 622 },
                            "targetConnector": "top"
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Throw",
                    "id": 642,
                    "inputs": {
                        "message": {
                            "accessors": ["getText"],
                            "code": "getText(values.key)",
                            "source": "@exception-layer-not-found",
                            "values": { "key": "@exception-layer-not-found" }
                        }
                    },
                    "position": "-50,660",
                    "title": "Throw"
                }
            ]
        },
        {
            "id": 666,
            "steps": [
                {
                    "id": 668,
                    "inputs": {},
                    "position": "0,0",
                    "purpose": "start",
                    "title": "Subworkflow",
                    "transitions": [
                        {
                            "id": 676,
                            "inputs": {},
                            "position": "90,60 90,110",
                            "target": { "id": 670 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::CreateValue",
                    "id": 670,
                    "inputs": {
                        "expression": {
                            "accessors": ["$getCode"],
                            "annotations": [
                                { "count": 8, "index": 0, "kind": "idref" }
                            ],
                            "code": "$getCode.arguments.attributes",
                            "source": "$getCode.arguments.attributes"
                        }
                    },
                    "name": "attributes",
                    "position": "-30,110",
                    "title": "Create Value",
                    "transitions": [
                        {
                            "id": 680,
                            "inputs": {},
                            "position": "90,180 90,230",
                            "target": { "id": 672 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Evaluate",
                    "id": 672,
                    "inputs": {
                        "expression": {
                            "accessors": [
                                "$layer",
                                "$layer",
                                "$layer",
                                "$layer",
                                "$attributes",
                                "$attributes"
                            ],
                            "annotations": [
                                { "count": 6, "index": 37, "kind": "idref" },
                                { "count": 6, "index": 79, "kind": "idref" },
                                { "count": 6, "index": 118, "kind": "idref" },
                                { "count": 6, "index": 159, "kind": "idref" },
                                { "count": 11, "index": 219, "kind": "idref" },
                                { "count": 11, "index": 525, "kind": "idref" }
                            ],
                            "code": "(function () {\n    var lookup = undefined;\n    if (!!$layer.result.subtypeField) {\n        lookup = $layer.result.subtypeField;\n    }\n    else if ($layer.result.typeIdField) {\n        lookup = $layer.result.typeIdField;\n    }\n    var keys = [];\n    for (var key in $attributes.result) {\n        keys.push(key);\n    }\n    var key = keys.find(function (k) {\n        if (k === lookup) {\n            return true;\n        }\n        if (k === null || k === undefined) {\n            return false;\n        }\n        if (lookup === null || lookup === undefined) {\n            return false;\n        }\n        return k.toLowerCase() === lookup.toLowerCase();\n    });\n    return $attributes.result[key];\n})()",
                            "source": "(()=>{\nvar lookup = undefined;\n\nif(!!$layer.result.subtypeField) {\n   lookup = $layer.result.subtypeField;\n} else if ($layer.result.typeIdField) {\n   lookup = $layer.result.typeIdField;\n}\n\nvar keys = [];\nfor(var key in $attributes.result) {\nkeys.push(key);\n}\nvar key = keys.find((k) => {\n  if(k === lookup) {\n    return true;\n  }\n  if(k === null || k === undefined) {\n    return false;\n  }\n  if(lookup === null || lookup  === undefined) {\n    return false;\n  }\n  return k.toLowerCase() === lookup.toLowerCase();\n\n});\n\nreturn $attributes.result[key];\n\n})()"
                        }
                    },
                    "name": "code",
                    "position": "-30,230",
                    "title": "Evaluate Expression",
                    "transitions": [
                        {
                            "id": 678,
                            "inputs": {},
                            "position": "90,300 90,350",
                            "target": { "id": 674 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::Evaluate",
                    "id": 674,
                    "inputs": {
                        "expression": {
                            "accessors": ["$getCode", "$code"],
                            "annotations": [
                                { "count": 8, "index": 0, "kind": "idref" },
                                { "count": 5, "index": 19, "kind": "idref" }
                            ],
                            "code": "$getCode.setResult($code.result)",
                            "source": "$getCode.setResult($code.result)"
                        }
                    },
                    "name": "evaluate1",
                    "position": "-30,350",
                    "title": "Evaluate Expression"
                }
            ]
        },
        {
            "id": 682,
            "steps": [
                {
                    "action": "gcx:wf:core::GetWorkflowInputs",
                    "id": 684,
                    "inputs": {},
                    "name": "workflowInputs",
                    "position": "-30,100",
                    "title": "Get Workflow Inputs",
                    "transitions": [
                        {
                            "id": 724,
                            "inputs": {},
                            "position": "90,170 90,220",
                            "target": { "id": 692 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::CreateValue",
                    "id": 686,
                    "inputs": {},
                    "name": "layerUrl",
                    "position": "580,220",
                    "title": "Create Value",
                    "transitions": [
                        {
                            "id": 708,
                            "inputs": {},
                            "position": "700,290 700,340",
                            "target": { "id": 688 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::CreateValue",
                    "id": 688,
                    "inputs": {
                        "expression": {
                            "accessors": ["$workflowInputs"],
                            "annotations": [
                                { "count": 15, "index": 0, "kind": "idref" }
                            ],
                            "code": "$workflowInputs.inputs.formTitle",
                            "source": "$workflowInputs.inputs.formTitle"
                        }
                    },
                    "name": "formTitle",
                    "position": "580,340",
                    "title": "Create Value",
                    "transitions": [
                        {
                            "id": 718,
                            "inputs": {},
                            "position": "700,410 700,430 860,430 860,135 880,135",
                            "sourceConnector": "bottom",
                            "target": { "id": 704 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::CreateValue",
                    "id": 690,
                    "inputs": {
                        "expression": {
                            "accessors": ["$workflowInputs"],
                            "annotations": [
                                { "count": 15, "index": 0, "kind": "idref" }
                            ],
                            "code": "$workflowInputs.inputs.layerId",
                            "source": "$workflowInputs.inputs.layerId"
                        }
                    },
                    "name": "layerId",
                    "position": "880,220",
                    "title": "Create Value"
                },
                {
                    "action": "gcx:wf:core::CreateValue",
                    "id": 692,
                    "inputs": {
                        "expression": {
                            "accessors": ["$workflowInputs"],
                            "annotations": [
                                { "count": 15, "index": 0, "kind": "idref" }
                            ],
                            "code": "$workflowInputs.inputs.searchFields",
                            "source": "$workflowInputs.inputs.searchFields"
                        }
                    },
                    "name": "searchFields",
                    "position": "-30,220",
                    "title": "Create Value",
                    "transitions": [
                        {
                            "id": 710,
                            "inputs": {},
                            "position": "90,290 90,340",
                            "sourceConnector": "bottom",
                            "target": { "id": 694 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:arcgis::GetMap",
                    "id": 694,
                    "inputs": {},
                    "name": "mapInfo",
                    "position": "-30,340",
                    "title": "Get Map",
                    "transitions": [
                        {
                            "id": 712,
                            "inputs": {},
                            "position": "210,375 270,375 270,135 290,135",
                            "target": { "id": 696 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::CreateValue",
                    "id": 696,
                    "inputs": {},
                    "name": "layer",
                    "position": "290,100",
                    "title": "Create Value",
                    "transitions": [
                        {
                            "id": 726,
                            "inputs": {},
                            "position": "410,170 410,220",
                            "target": { "id": 698 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::CreateValue",
                    "id": 698,
                    "inputs": {
                        "expression": {
                            "accessors": [],
                            "code": "false",
                            "source": "false"
                        }
                    },
                    "name": "noResults",
                    "position": "290,220",
                    "title": "Create Value",
                    "transitions": [
                        {
                            "id": 714,
                            "inputs": {},
                            "position": "410,290 410,340",
                            "target": { "id": 700 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::CreateValue",
                    "id": 700,
                    "inputs": {
                        "expression": {
                            "accessors": ["$workflowInputs"],
                            "annotations": [
                                { "count": 15, "index": 0, "kind": "idref" }
                            ],
                            "code": "$workflowInputs.inputs.eventSubWorkflow",
                            "source": "$workflowInputs.inputs.eventSubWorkflow"
                        }
                    },
                    "name": "eventSubWorkflow",
                    "position": "290,340",
                    "title": "Create Value",
                    "transitions": [
                        {
                            "id": 716,
                            "inputs": {},
                            "position": "530,375 560,375 560,135 580,135",
                            "target": { "id": 702 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::CreateValue",
                    "id": 702,
                    "inputs": {
                        "expression": {
                            "accessors": ["$eventSubWorkflow"],
                            "annotations": [
                                { "count": 17, "index": 2, "kind": "idref" }
                            ],
                            "code": "!!$eventSubWorkflow.result",
                            "source": "!!$eventSubWorkflow.result"
                        }
                    },
                    "name": "hasSubWorkflow",
                    "position": "580,100",
                    "title": "Create Value",
                    "transitions": [
                        {
                            "id": 728,
                            "inputs": {},
                            "position": "700,170 700,220",
                            "target": { "id": 686 }
                        }
                    ]
                },
                {
                    "action": "gcx:wf:core::CreateValue",
                    "id": 704,
                    "inputs": {
                        "expression": {
                            "accessors": ["$workflowInputs"],
                            "annotations": [
                                { "count": 15, "index": 0, "kind": "idref" }
                            ],
                            "code": "$workflowInputs.inputs.formDescription",
                            "source": "$workflowInputs.inputs.formDescription"
                        }
                    },
                    "name": "formDescription",
                    "position": "880,100",
                    "title": "Create Value",
                    "transitions": [
                        {
                            "id": 720,
                            "inputs": {},
                            "position": "1000,170 1000,220",
                            "target": { "id": 690 }
                        }
                    ]
                },
                {
                    "id": 706,
                    "inputs": {},
                    "position": "0,0",
                    "purpose": "start",
                    "title": "Container",
                    "transitions": [
                        {
                            "id": 722,
                            "inputs": {},
                            "position": "90,60 90,100",
                            "sourceConnector": "bottom",
                            "target": { "id": 684 }
                        }
                    ]
                }
            ]
        }
    ],
    "deploymentConfig": { "supportedApps": { "VSW": true } },
    "designerVersion": "5.36.0+40",
    "forms": [
        {
            "defaults": {},
            "elements": {
                "footer": {
                    "enabled": true,
                    "items": {
                        "0": {
                            "default": true,
                            "index": 0,
                            "label": {
                                "markdown": "@queryForm-buttons-submit"
                            },
                            "validates": true,
                            "value": "submit"
                        },
                        "1": {
                            "index": 1,
                            "label": {
                                "markdown": "@queryForm-buttons-cancel"
                            },
                            "validates": false,
                            "value": "cancel"
                        }
                    },
                    "section": "footer",
                    "type": "ButtonBar",
                    "visible": true
                },
                "header": {
                    "section": "header",
                    "title": { "markdown": "@queryForm-title" },
                    "type": "Header"
                }
            },
            "id": 730
        }
    ],
    "licenseInfo": {
    },
    "references": [
        {
            "id": 295,
            "path": "https://unpkg.com/@vertigis/workflow-activities-configurable-queries",
            "suite": "uuid:fc5de4bd-b399-4353-82ea-cbf393a350b3"
        }
    ],
    "start": { "id": 3 },
    "strings": {
        "de": {
            "exception-field-not-found": "Abfragefeld im Ziellayer nicht gefunden.  Bitte wenden Sie sich an den Anwendungsadministrator.",
            "exception-layer-not-found": "Ziellayer nicht in Webkarte gefunden. Bitte kontaktieren Sie den Systemadministrator",
            "queriesListForm-buttons-cancel": "Abbrechen",
            "queriesListForm-buttons-refine": "Abfrage ändern",
            "queriesListForm-buttons-run": "Abfragen",
            "queriesListForm-title": "Gespeichert Abfragen",
            "queryForm-buttons-back": "Zurück",
            "queryForm-buttons-cancel": "Abbrechen",
            "queryForm-buttons-submit": "Starten",
            "queryForm-error-no-results": "Die Abfrage hat keine Ergebnisse zurückgegeben. Bitte passen Sie die Parameter an und versuchen Sie es erneut.",
            "queryForm-queriesList-description": "Wählen Sie eine Abfrage auch der untenstehenden Liste aus.",
            "queryForm-queriesList-title": "Gespeicherte Abfragen",
            "queryForm-title": "Layerabfrage"
        },
        "inv": {
            "exception-field-not-found": "Query field not found in target layer.  Please contact the application administrator.",
            "exception-layer-not-found": "Target layer not found in web map. Please contact the system administrator",
            "queriesListForm-buttons-cancel": "Close",
            "queriesListForm-buttons-refine": "Refine Query",
            "queriesListForm-buttons-run": "Run Query",
            "queriesListForm-title": "Stored Queries",
            "queryForm-buttons-back": "Back",
            "queryForm-buttons-cancel": "Close",
            "queryForm-buttons-submit": "Submit",
            "queryForm-error-no-results": "The query return no results.  Please adjust the parameters and try again.",
            "queryForm-queriesList-description": "Select the query from the list below.",
            "queryForm-queriesList-title": "Stored Queries",
            "queryForm-title": "Layer Query"
        }
    },
    "transitions": [
        {
            "branch": "content",
            "id": 401,
            "inputs": {},
            "source": { "id": 395 },
            "target": { "id": 399 }
        },
        {
            "branch": "loop",
            "id": 451,
            "inputs": {},
            "source": { "id": 447 },
            "target": { "id": 411 }
        },
        {
            "branch": "content",
            "id": 760,
            "inputs": {},
            "source": { "id": 732 },
            "target": { "id": 706 }
        },
        {
            "branch": "content",
            "id": 762,
            "inputs": {},
            "source": { "id": 734 },
            "target": { "id": 668 }
        },
        {
            "branch": "content",
            "id": 764,
            "inputs": {},
            "source": { "id": 736 },
            "target": { "id": 628 }
        },
        {
            "branch": "load$footer",
            "id": 766,
            "inputs": {},
            "source": { "id": 738 },
            "target": { "id": 606 }
        },
        {
            "branch": "load$header",
            "id": 768,
            "inputs": {},
            "source": { "id": 738 },
            "target": { "id": 600 }
        },
        {
            "branch": "content",
            "id": 770,
            "inputs": {},
            "source": { "id": 740 },
            "target": { "id": 562 }
        },
        {
            "branch": "content",
            "id": 772,
            "inputs": {},
            "source": { "id": 746 },
            "target": { "id": 538 }
        },
        {
            "branch": "content",
            "id": 774,
            "inputs": {},
            "source": { "id": 748 },
            "target": { "id": 488 }
        },
        {
            "branch": "content",
            "id": 776,
            "inputs": {},
            "source": { "id": 752 },
            "target": { "id": 458 }
        },
        {
            "branch": "content",
            "id": 778,
            "inputs": {},
            "source": { "id": 754 },
            "target": { "id": 428 }
        },
        {
            "branch": "content",
            "id": 780,
            "inputs": {},
            "source": { "id": 756 },
            "target": { "id": 382 }
        },
        {
            "branch": "content",
            "id": 782,
            "inputs": {},
            "source": { "id": 758 },
            "target": { "id": 320 }
        }
    ]
}
